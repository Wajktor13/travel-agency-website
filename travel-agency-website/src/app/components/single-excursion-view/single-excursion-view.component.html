<section id="excursion">

    <span id="title">
        <h1>{{excursion.name}}</h1>
        <p>{{excursion.description}}</p>
    </span>


    <div id="slider-details-container">

        <div id="slider">
            <img src={{excursion.img}} width="700px" height="400px">
        </div>

        <div id="info">
            <h3>Details:</h3>
            <p>Location: {{excursion.country}}</p>
            <p>When: from {{excursion.startDate}} to {{excursion.endDate}}</p>
            <p>Price: {{excursion.unitPrice | currency}}</p>
            <p *ngIf="leftInStock > 0; else outOfStock">In stock: {{leftInStock}}</p>
            <ng-template #outOfStock class="out-of-stock">
                <p>Out of stock!</p>
            </ng-template>
        </div>

    </div>

    <div id="buttons-container">
        <div id="remove-card-button" (click)="removeButtonClicked()" *ngIf="checkRolesForRemovingExcursions()"></div>
        <button [disabled]="reservationCounter == excursion.maxInStock - getReservationsFromHistory(this.id)" class="add-reservation-button reservation-button" (click)="changeReservationCounter(1)">+</button>
        <button [disabled]="reservationCounter == 0" class="remove-reservation-button reservation-button" (click)="changeReservationCounter(-1)">-</button>
    </div>

    <div id="long-description">

        <h2>Description:</h2>

        <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Praesentium eum perferendis placeat dicta, numquam ea earum accusantium sunt eaque eligendi, quod neque! Explicabo neque tempora recusandae sed cum eum aliquid. Rem dolorem minus nemo harum eos saepe repellat soluta tenetur. Dolorum assumenda aperiam eaque eveniet, illum dolorem sed praesentium obcaecati veniam eligendi perferendis reprehenderit dolore? Quisquam dolore non deleniti obcaecati architecto at nesciunt consequuntur nobis libero, incidunt dignissimos molestiae adipisci expedita! Rem repellendus necessitatibus atque qui minima! Beatae, harum nam! Qui dicta voluptas laborum cumque dolor iste amet a deleniti ut, nam doloribus ab velit reiciendis veritatis inventore tenetur laboriosam! Reprehenderit, explicabo. Quidem amet animi deleniti possimus rem eligendi ab minus aliquid nisi explicabo voluptatum ratione, officia et esse est non. Veniam pariatur eligendi facere dolore sapiente sequi tenetur dicta, blanditiis quam, numquam id laudantium quibusdam repudiandae nostrum adipisci animi eveniet laborum! Repellat voluptatem id quo impedit. Perferendis quam, quod explicabo quasi molestias doloremque quisquam illum cumque vel optio dolores ratione suscipit fuga perspiciatis nemo quos, culpa, minima dolorem maiores? Illum doloremque corrupti quibusdam nesciunt enim labore qui expedita, pariatur ipsum esse quas sit nemo. Molestias, corporis culpa quo doloribus error cum aspernatur dolorum laudantium, adipisci non odit officiis soluta.
        </p>
    </div>

    <div id="review-div">

        <div id="reviews">

            <h2>Reviews:</h2>

            <div *ngIf="reviews.length == 0">
                There are no reviews for this excursion. Add the first one below!
            </div>
 
            <div class="review" *ngFor="let review of reviews">

                <div class="review-header">
                    <p class="nick">{{review.nick}} | attended: {{review.date}}</p>
                </div>

                <div class="stars-date-div">
                    <div class="stars-div">
                        <img *ngFor="let f of numSequence(review.stars)" src="../../../assets/images/star.png" alt="star" width="20px">
                    </div>
                </div>

                <div>
                    {{review.text}}
                </div>

            </div>
        </div>

        <hr>

        <h3 id="add-review-h">Add a review</h3>

        <form id="review-form" #addReviewForm="ngForm" (submit)="reviewFormSubmitted()">  
                      
            <div class="form-group">
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <img src="../../../assets/images/avatar.png">
                        </span>
                        <input type="text" name="nick" class="form-control" [(ngModel)]="reviewNick">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <img src="../../../assets/images/calendar.png" alt="">
                        </span>
                        <input class="form-control" type="date" name="date" [(ngModel)]="reviewDate">
                    </div>
                </div>
            </div>
                
            <div class="form-group">
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <img src="../../../assets/images/star.png" alt="">
                        </span>
                        <select class="form-control" id="rate" name="stars" [(ngModel)]="reviewStars">
                            <option value=1>1</option>
                            <option value=2>2</option>
                            <option value=3>3</option>
                            <option value=4>4</option>
                            <option value=5>5</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <img src="../../../assets/images/review.png" alt="">
                        </span>
                        <textarea class="form-control" id="review" rows="3" name="review" [(ngModel)]="reviewText"></textarea>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary">Submit</button>
          
          </form>
    </div>

</section>
